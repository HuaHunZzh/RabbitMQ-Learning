# 持久化以及不公平分发
## 持久化
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为了保证RabbitMQ消息不丢失，我们需要将队列和消息都持久化。  
## 不公平分发
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RabbitMQ根据各个消费者处理消息的速度，动态调整分发策略。此时可能不再遵循默认的轮询的策略。   
### 预取值
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;类似于该通道的最大暂存（即未被确认的）消息数量。比如若prefetchCount=1，当消费者收到一条消息且来不起及处理，即该消息未被确认，则该消息会被暂存在通道上。此时若再收到一条消息，由于超过预取值prefetchCount，该消息会被队列分发到其它消费者。当然，此时队列不再严格遵循轮询策略。在极端情况下，所有的消费者都没有完成手头上的任务，队列还在不停地添加新任务，队列有 可能遇到被撑满地情况，这个时候就只能添加新的消费者或者改变其它存储任务的策略。




